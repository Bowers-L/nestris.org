<div class="modal" *ngIf="data$ | async as data">
    <div class="top-row">

        <div class="profile panel" [ngStyle]="{'borderColor' : leagueColor(data.dbUser.league)}">
            <div class="top">
                <div class="left">
                    <h2 class="username">{{data.dbUser.username}}</h2>
                    <app-online-indicator [isOnline]="data.online" />
                </div>
                <h2 class="league-name" [ngStyle]="{'color' : leagueColor(data.dbUser.league)}">{{leagueName(data.dbUser.league)}}</h2>
            </div>
            <p class="join-date">Joined {{dateString(data.dbUser.created_at)}}</p>

            <app-league-icon [height]="140" [league]="data.dbUser.league" />
            <app-xp-info [league]="data.dbUser.league" [xp]="data.dbUser.xp" />
        </div>

        <div class="other">
            <p class="coming-soon">Coming soon!</p>
        </div>

    </div>

    <div class="text-row">
        <h1>Completed Quests</h1>
        <app-solid-button label="Show All" [fontSize]="12" [paddingHorizontal]="10" [paddingVertical]="5" (smartClick)="showQuests()" />
    </div>

    <div class="quests">
        <app-quest *ngFor="let questID of getCompletedQuests(data.dbUser)" [questID]="questID" [status]="true" />
    </div>

    <div class="text-row">
        <h1>Activity</h1>
    </div>
    <div class="activity-panel" *ngIf="false">
        <ng-container *ngFor="let activityGroup of (this.activities$ | async)">
            <h2>{{activityDateString(activityGroup.date)}}</h2>
            <div class="activity-row" *ngFor="let activity of activityGroup.activities">

                <ng-container *ngIf="activity.type === ActivityType.PERSONAL_BEST">
                    <p>Scored a new personal best of</p>
                    <app-highest-score [highestScore]="activity.score" [size]="10" />
                    <p>on level {{activity.startLevel}} start</p>
                </ng-container>

                <ng-container *ngIf="activity.type === ActivityType.RANKED_MATCH">
                    <p>{{activity.trophyDelta >= 0 ? 'Gained' : 'Lost'}}</p>
                    <app-trophies [trophies]="abs(activity.trophyDelta)" [size]="10" [color]="activity.trophyDelta >= 0 ? '#58D774' : '#D75858'" />
                    <p>in a ranked match against</p>
                    <p class="highlight">{{activity.opponentName}}</p>
                    <p>with score</p>
                    <p class="highlight">{{activity.myScore}}</p>
                    <p>to</p>
                    <p class="highlight">{{activity.opponentScore}}</p>
                </ng-container>

                <ng-container *ngIf="activity.type === ActivityType.QUEST_COMPLETION">
                    <p>Completed quest</p>
                    <p class="highlight" [ngStyle]="{'color' : questColor(activity.questID)}">{{questName(activity.questID)}}</p>
                    <p>and gained {{questXP(activity.questID)}} xp</p>
                </ng-container>

                <ng-container *ngIf="activity.type === ActivityType.LEAGUE_PROMOTION">
                    <p>Promoted from</p>
                    <p class="highlight" [ngStyle]="{'color' : leagueColor(previousLeague(activity.league))}">{{leagueName(previousLeague(activity.league))}}</p>
                    <p>to</p>
                    <p class="highlight" [ngStyle]="{'color' : leagueColor(activity.league)}">{{leagueName(activity.league)}}</p>
                </ng-container>

                <ng-container *ngIf="activity.type === ActivityType.PUZZLE_ELO">
                    <p>Reached a rating of</p>
                    <app-puzzle-elo [puzzleElo]="activity.elo" [size]="10" />
                    <p>in puzzles</p>
                </ng-container>

            </div>
        </ng-container>
    </div>

</div>